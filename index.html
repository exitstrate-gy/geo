<!DOCTYPE HTML>
<!--
	Read Only by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Satellite Spaceports - Exit Strategy</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
		<link href="assets/css/nouislider.css" rel="stylesheet">
		<link href="assets/css/site.css" rel="stylesheet">

		<!-- Scripts -->
		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/js/jquery.scrollzer.min.js"></script>
		<script src="assets/js/jquery.scrolly.min.js"></script>
		<script src="assets/js/skel.min.js"></script>
		<script src="assets/js/util.js"></script>
		<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
		<script src="assets/js/main.js"></script>

		<script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>
		<script src="assets/js/all-satports.js"></script>
		<script src="assets/js/nouislider.js"></script>
		<script>
			$(window).ready(function() {
				//Get the year
				var current_year = new Date().getFullYear();

				//Create map
				var sitesMap = L.map('mapid').setView([	23, 10], 1.5);

				// Define icon colors: see https://github.com/pointhi/leaflet-color-markers
				var activeIcon = new L.Icon({
					iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',
  					shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
						iconSize: [25, 41],
						iconAnchor: [12, 41],
						popupAnchor: [1, -34],
						shadowSize: [41, 41]
					});
				var decommissionedIcon = new L.Icon({
					iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-grey.png',
  					shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
						iconSize: [25, 41],
						iconAnchor: [12, 41],
						popupAnchor: [1, -34],
						shadowSize: [41, 41]
					});				

				// Add basemap
				L.tileLayer(
				'https://api.mapbox.com/styles/v1/mapbox/outdoors-v10/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1Ijoidm5heWxvbiIsImEiOiJjajBzczU1amwwMmcxMnFscm1veG80ZzV3In0.E2I5QUe3l92M1pmGKie8_A', {
				    tileSize: 512,
				    zoomOffset: -1,
 				   	attribution: '© <a href="https://www.mapbox.com/map-feedback/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
					}).addTo(sitesMap);

				var spaceportsLayer = null;

				function loadMarkers(){
					if(spaceportsLayer){
						sitesMap.removeLayer(spaceportsLayer);
					}
					// Add features from GeoJSON file
					spaceportsLayer = L.geoJson(allSatports, {
						// Define marker color
			    	    style: function (feature) {
 			    	       return { color: feature.properties.color };
			    	    },
						// Create popup
			    	    onEachFeature: function (feature, layer) {
        					layer.bindPopup(feature.properties.name + '<br/>Operated 	by ' + feature.properties.owner + '<br/>' + feature.	properties.caption);
						},
						// Use status-dependent markers
						pointToLayer: function(feature, latlng) {
							var icon = null;
							var start_year = feature.properties.commission_year
							var end_year = feature.properties.decommission_year
							
							if(start_year > current_year){ return(null); }
							else if(end_year === null || current_year < end_year){ 
								icon = 	activeIcon 
							}else{ icon = decommissionedIcon; }
	
							return new L.marker(latlng, {icon: icon});
						}
					});

					sitesMap.addLayer(spaceportsLayer);
				}

				var stepSlider = document.getElementById('slider-step');

				noUiSlider.create(stepSlider, {
					start: [ 2017 ],
					step: 1,
					range: {
					  'min': 1957,
					  'max': 2017
					},
					pips: {
						mode: 'count',
						values: 7,
						density: (10/6)
					}
				});

				stepSlider.noUiSlider.on('update', function(values){
					current_year = values[0]-0;
					console.log("current_year: ", current_year);
					console.log("updated: ", values);
					loadMarkers();
				});
			});
		</script>
	</head>
	<body>

				<!-- Main -->
					<div id="main">

						<!-- One -->
							<section id="one">
								<div class="container">
										<h2>Satellite launch sites, 1957-2017</h2>
									<p>A map of all the spaceports ever built that have launched a satellite.</p>
								</div>
								<div id="mapid">
							<br/>
							<br/>
								</div>
								<div id="slider-step">									
									<script>
									</script>
								</div>
								<div id="pips-count">
								<script>
									</script>

								</div>
							</section>

						<!-- Two -->
							<section id="two">
								<div class="container">
									<h3>How to read this map</h3>
									<p>Grey markers indicate sites that have been decommissioned. Green markers show sites still in use.</p>
									<h3>Notable spaceports</h3>
									<ul>
									<li>Oldest spaceport on this map: Baikonur Cosmodrome (Russia)</li>
									<li>Newest spaceports on this map: Vostochny Cosmodrome (Russia) and China Wenchang Spacecraft Launch Site (China)</li>
									<li>Shortest tenure: Omelek Island in Pacific Ocean (2 years))</li>
									<li>Most interesting mobile platform: Sea Launch Ocean Odyssey platform is a private commercial launch platform. It docks in Long Beach, California and travels 11 days to the equator to launch its payloads. <a href="https://en.wikipedia.org/wiki/Sea_Launch">Sea Launch</a> was founded by a multinational consortium and was acquired by Russia’s S7 Airlines in December 2016. 
									</ul>
									<h3>Credits</h3>
									<p>Data from <a href="https://en.wikipedia.org/wiki/Spaceport#Spaceports_with_achieved_satellite_launches">Wikipedia</a>. This map excludes vessels like <a href="https://en.wikipedia.org/wiki/Russian_submarine_Novomoskovsk_(K-407)">Russian submarines</a> (insufficient geographic information available) and Pegasus spaceplanes (which have launched at <a href="https://en.wikipedia.org/wiki/Pegasus_(rocket)">multiple sites</a>). 
								</div>
							</section>

					</div>

				<!-- Footer -->
					<section id="footer">
						<div class="container">
							<ul class="copyright">
								<li>&copy; Vanessa Naylon. All rights reserved.</li><li>Page made with a thing from <a href="http://html5up.net">HTML5 UP</a></li>
							</ul>
						</div>
					</section>

			</div>


	</body>
</html>